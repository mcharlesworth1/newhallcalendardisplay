// --- Calendar Fetching Function (Corrected Version) ---
        async function fetchCalendar() {
            const fetchUrl = '/.netlify/functions/fetch-calendar';

            try {
                const response = await fetch(fetchUrl);
                if (!response.ok) {
                    throw new Error(`Function returned status: ${response.status}`);
                }
                const icsData = await response.text();
                const jcalData = ICAL.parse(icsData);
                const comp = new ICAL.Component(jcalData);
                const allEvents = comp.getAllSubcomponents('vevent');
                
                // --- REVERTED Time Logic (Shows all of today) ---
                const today = new Date();
                today.setHours(0, 0, 0, 0); // Set to midnight this morning
                
                const tomorrow = new Date(today);
                tomorrow.setDate(today.getDate() + 1); // Set to midnight tomorrow
                
                const todaysEvents = [];
                
                allEvents.forEach(eventComponent => {
                    const event = new ICAL.Event(eventComponent);
                    if (event.isRecurring()) {
                        const iterator = event.iterator();
                        let next;
                        // Find all recurring events that happen before tomorrow
                        while ((next = iterator.next()) && next.toJSDate() < tomorrow) {
                            const occ = event.getOccurrenceDetails(next);
                            
                            // --- REVERTED CHECK ---
                            // Only add it if its start time is *today*
                            if (occ.startDate.toJSDate() >= today) {
                                todaysEvents.push({
                                    summary: event.summary,
                                    startDate: occ.startDate.toJSDate(),
                                    endDate: occ.endDate.toJSDate()
                                });
                            }
                        }
                    } else { 
                        const eventStartDate = event.startDate.toJSDate();

                        // --- REVERTED CHECK ---
                        // Only add it if it starts *today* (after midnight, before tomorrow)
                        if (eventStartDate >= today && eventStartDate < tomorrow) {
                            todaysEvents.push({
                                summary: event.summary,
                                startDate: eventStartDate,
                                endDate: event.endDate.toJSDate()
                            });
                        }
                    }
                });
                
                // Sort and pass to pagination
                todaysEvents.sort((a, b) => a.startDate - b.startDate);
                setupEventPagination(todaysEvents);
                
            } catch (error) {
                console.error("Error fetching or parsing calendar:", error);
                eventsContainer.innerHTML = `<p class="status-message" style="color: red;">Could not load calendar data.</p>`;
            }
        }
